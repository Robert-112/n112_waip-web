extends layout

block content
  main(role='main')
    // TODO: - Login verbessern:
    // Login-Seite benötigt Fehlerrückmeldung (wie Nutzerverwaltung): falsches Kennwort, Nutzer nicht vorhanden etc.
    // - Login/Logout protokollieren
    // - fehlerhafte/doppelte Logins protokollieren 
    // - prüfen ob es sinnvoll ist, bereits eingeloggte User nicht mehr zulassen (Session prüfen)
    // - bei fehlendem Login zur Login-Seite weiterleiten und nach dem Login die zuvor besuchte Seite anzeigen
    .container
      #info.row
        .col-md-3
        .col-md-6.col-xs-12
          if error
            .card.text-white.bg-danger.mb-3
              .card-body
                .row
                  .col-9
                    h5.card-title.ion-md-close-circle-outline  Fehler
                    p.card-text=error
                  .col-3.text-right
                    button#close_info.btn.btn-info.ion-md-close
      .row
        .col-sm-9.col-md-7.col-lg-5.mx-auto
          .card.my-5
            .card-body
              h5.card-title.text-center Benutzeranmeldung
              form(action='/login', method='POST')
                .form-group
                  label(for='inputUser') Benutzername
                  input#login-user.form-control(type='text' name='user'  placeholder='Benutzername eingeben' required='' autofocus='')
                  small.form-text.text-muted Der Benutzer wird Ihnen von der Administration mitgeteilt.
                .form-group
                  label(for='inputPassword') Passwort
                  input#login-password.form-control(type='password' name='password' placeholder='Passwort' required='')  
                .form-group
                  .custom-control.custom-switch
                    input#rembemerme.custom-control-input(type='checkbox' name='rememberme' checked='')
                    label.custom-control-label.text-warning(for='rembemerme') Anmeldung dauerhaft speichern
                button.btn.btn-lg.btn-primary.btn-block.text-uppercase(type='submit') Anmelden
              hr
          .card.my-5 
            .card-body 
              h5.card-title.text-center WebAuthn
              form#registration-form
                // WebAuthn-Register
                label(for='email') E-Mail 
                input#email(type='email' name='email' autocomplete='email' placeholder='E-Mail-Adresse eingeben')
                button.btn.btn-lg.btn-outline-success.btn-block.text-uppercase(type='submit') für WebAuthn registrieren
                small.form-text.text-muted.text-center WebAuthn-Registrierung benötigt einen neuen Sicherheitsschlüssel oder biometrische Daten.
              // WebAuthn-Login
              button#webauthn-login.btn.btn-lg.btn-outline-primary.btn-block.text-uppercase(type='button') Mit WebAuthn anmelden
              small.form-text.text-muted.text-center WebAuthn benötigt einen registrierten Sicherheitsschlüssel oder biometrische Daten.
              
      //.row
        .col-sm-9.col-md-7.col-lg-5.mx-auto
          .card.my-5
            .card-body
              h5.card-title.text-center Anmeldung mit IP-Adresse
              form(action='/login_ip', method='POST')
                .form-group
                  small.form-text.text-muted Wenn die IP-Adresse Ihres Gerätes hinterlegt ist, 
                    | können Sie sich auch ohne Benutzername/Kennwort anmelden. 
                    | Ihre Anmeldung wird dann dauerhaft gespeichert.
                button.btn.btn-lg.btn-outline-primary.btn-block.text-uppercase(type='submit') Anmelden

    script(src='/js/base64url.js')
    script(src='/js/webauthn-login.js')
    script(src='/js/webauthn-register.js')
