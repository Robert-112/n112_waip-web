extends ../layout

block content
  main(role='main')
    .container-fluid
      #info.row
        .col-md-3
        .col-md-6.col-xs-12
          if error
            .card.text-white.bg-danger.mb-3
              .card-body
                .row
                  .col-9
                    h5.card-title.ion-md-close-circle-outline  Fehler
                    p.card-text=error
                  .col-3.text-right
                    button#close_info.btn.btn-info.ion-md-close
          if success
            .card.text-white.bg-success.mb-3
              .card-body
                .row
                  .col-9
                    h5.card-title.ion-md-checkmark-circle-outline  Erfolg
                    p.card-text=success
                  .col-3.text-right
                    button#close_info.btn.btn-info.ion-md-close
      .row
        .col-12
          h3 Neue Wache anlegen
        .col-12
          form(action="/adm_edit_wachen/create" method="post")
            .form-row
              .form-group.col-md-2
                label Nr Leitstelle
                input.form-control(type="text" name="nr_leitstelle" required pattern="[0-9]" maxlength="1" title="Nur eine Ziffer (0-9) erlaubt")
              .form-group.col-md-2
                label Name Leitstelle
                input.form-control(type="text" name="name_leitstelle" required)
              .form-group.col-md-2
                label KFZ Leitstelle
                input.form-control(type="text" name="kfz_leitstelle")
              .form-group.col-md-2
                label Nr Wache
                input.form-control(type="text" name="nr_wache" required pattern="\\d{6}" maxlength="6" minlength="6" title="Genau 6-stellige Zahl (000001 - 999999)")
              .form-group.col-md-2
                label Name Wache
                input.form-control(type="text" name="name_wache" required)
              .form-group.col-md-2
                label Nr Kreis
                input.form-control(type="text" name="nr_kreis" pattern="\\d{2}" maxlength="2" minlength="2" title="Genau 2-stellige Zahl (00-99) oder leer lassen")
              .form-group.col-md-2
                label Name Kreis
                input.form-control(type="text" name="name_kreis")
              .form-group.col-md-2
                label KFZ Kreis
                input.form-control(type="text" name="kfz_kreis")
              .form-group.col-md-2
                label Nr Träger
                input.form-control(type="text" name="nr_traeger")
              .form-group.col-md-2
                label Name Träger
                input.form-control(type="text" name="name_traeger")
              .form-group.col-md-2
                label Nr Standort
                input.form-control(type="text" name="nr_standort")
              .form-group.col-md-2
                label Nr Abteilung
                input.form-control(type="text" name="nr_abteilung")
              .form-group.col-md-2
                label Name Beschreibung
                input.form-control(type="text" name="name_beschreibung")
              .form-group.col-md-2
                label Name Erweiterung
                input.form-control(type="text" name="name_erweiterung")
              .form-group.col-md-2
                label X Longitude
                input.form-control(type="text" name="wgs84_x" pattern="-?\\d{1,3}\\.\\d+" title="Longitude im Dezimalformat, z.B. 7.12345")
              .form-group.col-md-2
                label Y Latitude
                input.form-control(type="text" name="wgs84_y" pattern="-?\\d{1,2}\\.\\d+" title="Latitude im Dezimalformat, z.B. 52.12345")
            button.btn.btn-success(type="submit") Anlegen
        .col-12
          .border-top.m-3
        .col-12
          h3 Wachen bearbeiten
          p Hier können Wachen angelegt, bearbeitet und gelöscht werden.
        .col-12
          table.table.table-striped
            thead
              tr
                th ID
                th Nr Leitstelle 
                th Name Leitstelle
                th KFZ Leitstelle
                th Nr Wache
                th Name Wache
                th Nr Kreis
                th Name Kreis
                th KFZ Kreis
                th Nr Träger
                th Name Träger
                th Nr Standort 
                th Nr Abteilung
                th Name Beschreibung 
                th Name Erweiterung
                th X Longitude
                th Y Latitude
                th Aktion
            tbody
              each w in wachen
                tr
                  // Formular für Bearbeitung der Wache (eine Zeile = ein Formular)
                  form(action="/adm_edit_wachen/edit" method="post")
                    input(type="hidden" name="id" value=w.id)
                    td= w.id
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="nr_leitstelle" value=w.nr_leitstelle pattern="[0-9]" maxlength="1" title="Nur eine Ziffer (0-9) erlaubt")
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="name_leitstelle" value=w.name_leitstelle)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="kfz_leitstelle" value=w.kfz_leitstelle)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="nr_wache" value=w.nr_wache pattern="\\d{6}" maxlength="6" minlength="6" title="Nur 6-stellige Wachennummer erlaubt")
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="name_wache" value=w.name_wache)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="nr_kreis" value=w.nr_kreis pattern="\\d{2}" maxlength="2" minlength="2" title="2-stellige Zahl des Kreises")
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="name_kreis" value=w.name_kreis)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="kfz_kreis" value=w.kfz_kreis)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="nr_traeger" value=w.nr_traeger)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="name_traeger" value=w.name_traeger)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="nr_standort" value=w.nr_standort)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="nr_abteilung" value=w.nr_abteilung)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="name_beschreibung" value=w.name_beschreibung)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="name_erweiterung" value=w.name_erweiterung)
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="wgs84_x" value=w.wgs84_x pattern="-?\\d{1,3}\\.\\d+" title="Longitude im Dezimalformat, z.B. 13.12345")
                    td
                      .input-group.input-group-sm
                        input.form-control(type="text" name="wgs84_y" value=w.wgs84_y pattern="-?\\d{1,2}\\.\\d+" title="Latitude im Dezimalformat, z.B. 52.12345")
                    td
                      .btn-group(role="group") 
                        button.btn.btn-primary.btn-sm(type="submit") Speichern
                        // Lösch-Button nutzt dasselbe Formularfeld 'id', aber eigenes Ziel via formaction
                        button.btn.btn-danger.btn-sm(type="submit" formaction="/adm_edit_wachen/delete" formmethod="post" onclick="return confirm('Wache wirklich löschen?')") Löschen
        