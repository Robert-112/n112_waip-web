extends ../layout

append head
  link(rel='stylesheet', href='/css/datatables.min.css')
  script(src='/js/datatables.min.js')
  script(src='/js/dataTables.bootstrap4.min.js')

  // TODO: Seite mit aktiven Clients anpassen:
  //  - nicht zwingend als Tabelle, sondern eher als .col mit Buttons um Aktionen an Clients zu senden
  //  - einzelnen Client über Verwaltungsoberfläche neu laden lassen

block content
  main(role='main')
    .container-fluid
      .row
        .col-12
          h3 Zeigt alle jetzt verbundenen Clients und deren Status an
        .col-12
          table#table_active_user.table-striped.table-bordered.table-hover.display.table-sm.table-responsive.w-100.table-dark
            thead
              tr
                th ID
                th Verbunden seit
                th Socket-ID
                th Benutzername
                th Berechtigungen
                th Client-IPs
                th Namespace
                th Raum 
                th Client-Status (Einsatz-ID)
                th Reset-Zeitstempel

  script.
    let datasets = !{JSON.stringify(dataSet).replace(/<\//g, '<\\/')}
    console.log(datasets)
    $(document).ready(function() {
      $('#table_active_user').DataTable( {
        "data": datasets,
        "language": 
          { "url": "/js/datatables_german.json" },
        "columns": [
          { "data": "id" },
          { "data": "connect_time" },
          { "data": "socket_id" },
          { "data": "user_name"},
          { "data": "user_permissions" },
          { "data": "client_ips" },
          { "data": "client_nsp" },
          { "data": "client_room" },
          { "data": "client_status" },
          { "data": "reset_timestamp" }
        ]
      });
    });
